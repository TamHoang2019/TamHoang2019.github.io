<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Flappy bird - Tamhoang2019</title>
	<style>
		canvas{
			border: 1px solid #d3d3d3;
			background-color: #f1f1f1;
		}
	</style>
</head>
<body onload="startGame()">
	<div style="text-align: center; width: 480px;">
		<button onmousedown="moveup()" onmouseup="clearmove()" ontouchstart="moveup()">UP</button> <br><br>
		<button onmousedown="moveleft()" onmouseup="clearmove()" ontouchstart="moveleft()">LEFT</button> <br><br>
		<button onmousedown="moveright()" onmouseup="clearmove()" ontouchstart="moveright()">RIGHT</button> <br><br>
		<button onmousedown="movedown()" onmouseup="clearmove()" ontouchstart="movedown()">DOWN</button> <br><br>
	</div>
	<script>
		var myGameArea = {
			canvas: document.createElement('canvas'),
			start: function(){
				this.canvas.width = 480;
				this.canvas.height = 270;
				this.context = this.canvas.getContext('2d');
				document.body.insertBefore(this.canvas, document.body.childNodes[0]);
				this.interval = setInterval(updateGameArea, 20);
				window.addEventListener('keydown', function(e){
					myGameArea.key = e.keyCode;
				});
				window.addEventListener('keyup', function(e){
					myGameArea.key = false;
				});
			},
			clear: function(){
				this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
			},
			stop: function(){
				clearInterval(this.interval);
			}
		};

		function component(width, height, color, x, y){
			this.width = width;
			this.height = height;
			this.speedX = 0;
			this.speedY = 0;
			this.x = x;
			this.y = y;
			this.update = function(){
				ctx = myGameArea.context;
				ctx.fillStyle = color;
				ctx.fillRect(this.x, this.y, this.width, this.height);
			};
			this.newPos = function(){
				this.x += this.speedX;
				this.y += this.speedY;
			};
			this.crashWith = function(otherObj){
				var myleft = this.x;
				var myright = this.x + (this.width);
				var mytop = this.y;
				var mybottom = this.y + (this.height);
				var otherleft = otherObj.x;
				var otherright = otherObj.x + (otherObj.width);
				var othertop = otherObj.y;
				var otherbottom = otherObj.y + (otherObj.height);
				var crash = true;
			};
		}

		function updateGameArea(){
			myGameArea.clear();
			if(myGameArea.key && myGameArea.key == 37){
				myBird.speedX =- 1;
			};
			if(myGameArea.key && myGameArea.key == 39){
				myBird.speedX = 1;
			};
			if(myGameArea.key && myGameArea.key == 38){
				myBird.speedY =- 1;
			};
			if(myGameArea.key && myGameArea.key == 40){
				myBird.speedY = 1;
			};
			myBird.newPos();
			myBird.update();
			myObstacle.update();
		}

		function startGame(){
			myBird = new component(30, 30, "red", 10, 120);
			myObstacle = new component(10, 200, "green", 300, 120);
			myGameArea.start();
		};


		//controller btn
		function moveup(){
			myBird.speedY -= 1;
		}
		function movedown(){
			myBird.speedY += 1;
		}
		function moveleft(){
			myBird.speedX -= 1;
		}
		function moveright(){
			myBird.speedX += 1;
		}

		function clearmove(){
			myBird.speedX = 0;
			myBird.speedY = 0;
		}
	</script>

	<p>We have created a game area!</p>
</body>
</html>